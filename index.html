<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Enhanced R Package for GEMPACK .har and .sl4 Files • HARplus</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Enhanced R Package for GEMPACK .har and .sl4 Files">
<meta name="description" content="Provides tools for processing and analyzing .har and .sl4 files, making it easier for GEMPACK users and GTAP researchers to handle large economic datasets. It simplifies the management of multiple experiment results, enabling faster and more efficient comparisons without complexity. Users can extract, restructure, and merge data seamlessly, ensuring compatibility across different tools. The processed data can be exported and used in R, Stata, Python, Julia, or any software that supports Text, CSV, or Excel formats.">
<meta property="og:description" content="Provides tools for processing and analyzing .har and .sl4 files, making it easier for GEMPACK users and GTAP researchers to handle large economic datasets. It simplifies the management of multiple experiment results, enabling faster and more efficient comparisons without complexity. Users can extract, restructure, and merge data seamlessly, ensuring compatibility across different tools. The processed data can be exported and used in R, Stata, Python, Julia, or any software that supports Text, CSV, or Excel formats.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">HARplus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/introduction.html">Enhanced R Package for GEMPACK .HAR and .SL4 File Processing</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bodysbobb/HARplus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="harplus-enhanced-r-package-for-gempack-har-and-sl4-files">HARplus: Enhanced R Package for GEMPACK .har and .sl4 Files<a class="anchor" aria-label="anchor" href="#harplus-enhanced-r-package-for-gempack-har-and-sl4-files"></a>
</h1></div>
<p><a href="https://www.pattawee-pp.com/" class="external-link"><img src="https://img.shields.io/badge/Pattawee.P-blue?label=Author" alt="Author"></a> <img src="https://img.shields.io/github/last-commit/Bodysbobb/HARplus?label=Last%20Updated&amp;color=blue" alt="Last Updated"><a href="https://github.com/Bodysbobb/HARplus/stargazers" class="external-link"><img src="https://img.shields.io/github/stars/Bodysbobb/HARplus?style=social" alt="Star"></a></p>
<p><a href="https://CRAN.R-project.org/package=HARplus" class="external-link"><img src="https://www.r-pkg.org/badges/version/HARplus" alt="CRAN"></a> <a href="https://github.com/Bodysbobb/HARplus/releases/latest" class="external-link"><img src="https://img.shields.io/github/v/tag/Bodysbobb/HARplus?label=GitHub%20Version&amp;color=3CB371&amp;sort=semver" alt="GitHub Version"></a> <img src="https://img.shields.io/github/license/Bodysbobb/HARplus?color=3CB371" alt="License"></p>
<p><strong>Extensions:</strong><br><a href="https://www.pattawee-pp.com/GTAPViz/" class="external-link"><img src="https://img.shields.io/badge/GTAPViz-276DC3?style=flat-square&amp;logo=r&amp;logoColor=white" alt="GTAPViz"></a></p>
<hr>
</div>
<div class="section level1">
<h1 id="update-19-oct-2025">Update (19-Oct-2025)<a class="anchor" aria-label="anchor" href="#update-19-oct-2025"></a>
</h1>
<ul>
<li>
<strong>Writing HAR files without limitations</strong> – The new <code><a href="reference/save_har.html">save_har()</a></code> function fully supports writing <code>.HAR</code> files with no size restrictions, allowing up to seven dimensions and approximately two million elements per chunk.<br>
</li>
<li>
<strong>Shock calculation and HAR export</strong> – Introduced <code><a href="reference/shock_calculate_uniform.html">shock_calculate_uniform()</a></code> and <code><a href="reference/shock_calculate.html">shock_calculate()</a></code> to compute and <strong>export shock results directly into GEMPACK-compatible <code>.HAR</code> files</strong>, supporting dynamic multi-period calculations (e.g., <code>ONEY</code>, <code>TWOY</code>, <code>THRY</code>, etc.) for recursive-dynamic simulations.</li>
</ul>
<hr>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>HARplus is an R package designed to process and analyze .HAR and .SL4 files, making it easier for GEMPACK users and GTAP model researchers to handle large economic datasets. It simplifies the management of multiple experiment results, enabling faster and more efficient comparisons without complexity.</p>
<p>With HARplus, users can extract, restructure, and merge data seamlessly, ensuring compatibility across different tools. The processed data can be exported and used in R, Stata, Python, Julia, or any software that supports .txt, CSV, or Excel formats.</p>
<hr>
</div>
<div class="section level2">
<h2 id="key-features">Key Features<a class="anchor" aria-label="anchor" href="#key-features"></a>
</h2>
<ul>
<li>
<strong>Efficient Data Extraction</strong> – Supports selective header loading and optimized memory usage for handling large <code>.HAR</code> and <code>.SL4</code> files.<br>
</li>
<li>
<strong>Flexible Data Structuring</strong> – Extract variables by name or dimension patterns while ensuring consistency across multiple inputs.<br>
</li>
<li>
<strong>Customizable Aggregation &amp; Merging</strong> – Manage subtotals, merge datasets, and structure data dynamically.<br>
</li>
<li>
<strong>Multiple Export Options</strong> – Output extracted data in CSV, Stata, RDS, and Excel formats with structured formatting.<br>
</li>
<li>
<strong>Powerful HAR Writing</strong> – Includes <code><a href="reference/save_har.html">save_har()</a></code> for exporting datasets to GEMPACK <code>.HAR</code> format with full binary compliance.<br>
</li>
<li>
<strong>Designed for GEMPACK</strong> – Ensures smooth integration with <code>.HAR</code> and <code>.SL4</code> files while offering additional flexibility.<br>
</li>
<li>
<strong>Ideal for GTAP Model Users</strong> – Built specifically to process and analyze GTAP model results efficiently.</li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="how-it-works">How It Works<a class="anchor" aria-label="anchor" href="#how-it-works"></a>
</h2>
<p>HARplus simplifies <code>.HAR</code> and <code>.SL4</code> file processing. You can: - Load files and selectively extract headers. - Extract data by variable name or dimension patterns. - Group, merge, and restructure data with ease. - Pivot and export data into structured formats. - Filter subtotals and rename dimensions for clarity.</p>
<hr>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>HARplus (version 1.0.1) can be installed directly in R using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"HARplus"</span><span class="op">)</span></span></code></pre></div>
<p>While the latest HARplus (version 1.1.2) can be installed from my GitHub using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"Bodysbobb/HARplus"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-guide-to-harplus">Quick Guide to HARplus<a class="anchor" aria-label="anchor" href="#quick-guide-to-harplus"></a>
</h2>
<p>All commands in this package have several options that allow users to play around with the data more freely and efficiently, not just import and get the data. For a complete guide on HARplus functions, check out the <strong><a href="https://rpubs.com/Bodysbob/1273998/" class="external-link">Vignette</a></strong> or <strong><a href="https://www.pattawee-pp.com/HARplus/" class="external-link">GitHub Vignette</a></strong></p>
<p>Below is a categorized reference of the main functions in HARplus:</p>
<div class="section level3">
<h3 id="data-importing">Data Importing<a class="anchor" aria-label="anchor" href="#data-importing"></a>
</h3>
<ul>
<li>
<strong><code><a href="reference/load_harx.html">load_harx()</a></code></strong> – Loads <code>.HAR</code> files with selective header extraction and structured metadata.<br>
</li>
<li>
<strong><code><a href="reference/load_sl4x.html">load_sl4x()</a></code></strong> – Loads <code>.SL4</code> files, extracting variable names and dimension structures.</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-extraction">Data Extraction<a class="anchor" aria-label="anchor" href="#data-extraction"></a>
</h3>
<ul>
<li>
<strong><code><a href="reference/get_data_by_var.html">get_data_by_var()</a></code></strong> – Extracts specific variables from <code>.HAR</code> or <code>.SL4</code> datasets, supporting subtotal filtering and merging.<br>
</li>
<li>
<strong><code><a href="reference/get_data_by_dims.html">get_data_by_dims()</a></code></strong> – Extracts data based on dimension patterns, with options for merging and subtotal filtering.</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-structure-summary--comparison">Data Structure Summary &amp; Comparison<a class="anchor" aria-label="anchor" href="#data-structure-summary--comparison"></a>
</h3>
<ul>
<li>
<strong><code><a href="reference/get_dim_elements.html">get_dim_elements()</a></code></strong> – Lists unique dimension elements (e.g., <code>REG</code>, <code>COMM</code>).<br>
</li>
<li>
<strong><code><a href="reference/get_dim_patterns.html">get_dim_patterns()</a></code></strong> – Extracts unique dimension structures (e.g., <code>REG*COMM*ACTS</code>).<br>
</li>
<li>
<strong><code><a href="reference/get_var_structure.html">get_var_structure()</a></code></strong> – Summarizes variable names, dimensions, and data structure.<br>
</li>
<li>
<strong><code><a href="reference/compare_var_structure.html">compare_var_structure()</a></code></strong> – Compares variable structures across multiple datasets for compatibility.</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-grouping--processing">Data Grouping &amp; Processing<a class="anchor" aria-label="anchor" href="#data-grouping--processing"></a>
</h3>
<ul>
<li>
<strong><code><a href="reference/group_data_by_dims.html">group_data_by_dims()</a></code></strong> – Groups extracted data by dimension priority, with support for automatic renaming and subtotal handling.<br>
</li>
<li>
<strong><code><a href="reference/rename_dims.html">rename_dims()</a></code></strong> – Renames dimension names for consistency.</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-transformation">Data Transformation<a class="anchor" aria-label="anchor" href="#data-transformation"></a>
</h3>
<ul>
<li>
<strong><code><a href="reference/pivot_data.html">pivot_data()</a></code></strong> – Converts long-format data into wide format.<br>
</li>
<li>
<strong><code><a href="reference/pivot_data_hierarchy.html">pivot_data_hierarchy()</a></code></strong> – Creates hierarchical pivot tables for structured reporting.</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-export">Data Export<a class="anchor" aria-label="anchor" href="#data-export"></a>
</h3>
<ul>
<li>
<strong><code><a href="reference/export_data.html">export_data()</a></code></strong> – Exports extracted data to CSV, Stata, TXT, RDS, or XLSX, with support for multi-sheet exports.</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-saving-new-in-v111">Data Saving (New in v1.1.1)<a class="anchor" aria-label="anchor" href="#data-saving-new-in-v111"></a>
</h3>
<ul>
<li>
<strong><code><a href="reference/save_har.html">save_har()</a></code></strong> – Saves processed data frames or arrays into GEMPACK-compatible <code>.HAR</code> files, automatically generating 1C set headers and supporting up to seven dimensions.</li>
</ul>
<div class="section level4">
<h4 id="technical-specifications">Technical Specifications<a class="anchor" aria-label="anchor" href="#technical-specifications"></a>
</h4>
<ul>
<li>Supports both <strong>1C (string)</strong> and <strong>RE (real)</strong> headers<br>
</li>
<li>Automatically generates 1C dimension sets (e.g., <code>REG</code>, <code>COMM</code>, <code>ENDW</code>)<br>
</li>
<li>Accepts data frames or arrays with flexible column naming<br>
</li>
<li>Writes associated set headers when <code>export_sets = TRUE</code><br>
</li>
<li>Maintains full GEMPACK binary structure with no size limitation<br>
</li>
<li>Supports up to seven dimensions and approximately 2 million elements per chunk<br>
</li>
<li>Allows <strong>dimension renaming</strong> and supports <strong>duplicate dimension names</strong> (e.g., <code>COMMxREGxREG</code>) during export</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="shock-calculation-framework-new-in-v112">Shock Calculation Framework (New in v1.1.2)<a class="anchor" aria-label="anchor" href="#shock-calculation-framework-new-in-v112"></a>
</h3>
<p>These functions provide a complete workflow to <strong>calculate, structure, and export GEMPACK-compatible shock files</strong> directly from <code>.HAR</code>, <code>.SL4</code>, <code>.CSV</code>, or <code>.XLSX</code> datasets—eliminating the need for manual conversion when preparing dynamic simulation shocks.</p>
<ul>
<li>
<strong><code><a href="reference/shock_calculate_uniform.html">shock_calculate_uniform()</a></code></strong> – Calculates uniform percentage shocks across all base rates and <strong>exports directly to GEMPACK <code>.HAR</code> format</strong>. Supports additive (<code>+</code>, <code>-</code>) and multiplicative (<code>*</code>, <code>/</code>) adjustments.<br>
</li>
<li>
<strong><code><a href="reference/shock_calculate.html">shock_calculate()</a></code></strong> – Computes target-based shocks by comparing initial and target datasets, automatically <strong>exporting the resulting shocks to <code>.HAR</code> files</strong> with dynamic timeline headers (e.g., <code>ONEY</code>, <code>TWOY</code>, <code>THRY</code>, etc.).<br>
</li>
<li>
<strong><code><a href="reference/create_initial_config.html">create_initial_config()</a></code></strong>, <strong><code><a href="reference/create_target_config.html">create_target_config()</a></code></strong>, and <strong><code><a href="reference/create_calc_config.html">create_calc_config()</a></code></strong> – Define input sources, column mappings, and timeline periods for use in both uniform and target-based shock calculations.</li>
</ul>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="license--author">License &amp; Author<a class="anchor" aria-label="anchor" href="#license--author"></a>
</h2>
<p>HARplus is released under the <strong>MIT License</strong>. See the full <strong><a href="LICENSE">license</a></strong>.</p>
<p><strong>Author:</strong><br><strong>Pattawee Puangchit</strong><br>
Ph.D. Candidate, Agricultural Economics<br>
Purdue University<br>
Research Assistant at GTAP</p>
<hr>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>Acknowledgement is due to <strong>Maros Ivanic</strong> for his work on the <code>HARr</code> package, which served as the foundation for HARplus. This package would not have been possible without his contributions.</p>
<hr>
</div>
<div class="section level2">
<h2 id="gtapviz-an-extension-of-harplus-for-visualization">GTAPViz: An Extension of HARplus for Visualization<a class="anchor" aria-label="anchor" href="#gtapviz-an-extension-of-harplus-for-visualization"></a>
</h2>
<p>I have developed another package specifically for visualization, particularly for GTAP users: <strong><a href="https://www.pattawee-pp.com/GTAPViz/" class="external-link">GTAPViz</a></strong></p>
<hr>
</div>
<div class="section level2">
<h2 id="gtap-database">GTAP Database<a class="anchor" aria-label="anchor" href="#gtap-database"></a>
</h2>
<p>Sample data used in this <a href="https://rpubs.com/Bodysbob/1273998/" class="external-link">vignette</a> is obtained from the GTAPv7 model and utilizes publicly available data from the <a href="https://www.gtap.agecon.purdue.edu/databases/archives.asp" class="external-link">GTAP 9 database</a>. For more details about the GTAP database and model, refer to the <strong><a href="https://www.gtap.agecon.purdue.edu/" class="external-link">GTAP Database</a></strong>.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=HARplus" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/bodysbobb/HARplus/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/bodysbobb/HARplus/issues/" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing HARplus</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Pattawee Puangchit <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pattawee Puangchit.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
