% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_data.R
\name{extract_by_dims}
\alias{extract_by_dims}
\title{Extract Data by Dimension Patterns from SL4 or HAR Objects}
\usage{
extract_by_dims(
  patterns = "ALL",
  ...,
  experiment_names = NULL,
  drop_subtotals = FALSE,
  rename_cols = NULL,
  merge_data = FALSE,
  pattern_mix = FALSE
)
}
\arguments{
\item{patterns}{A character vector of dimension patterns to extract. Use \code{"ALL"} or \code{NULL}
to extract all unique patterns across the datasets.}

\item{...}{One or more SL4 or HAR objects to process.}

\item{experiment_names}{An optional character vector specifying names for each data object.
If \code{NULL}, names are inferred from the function call.}

\item{drop_subtotals}{Logical; if \code{TRUE}, subtotal rows (with \code{Subtotal == "TOTAL"}) are removed
from the extracted data.}

\item{rename_cols}{A named vector specifying column name replacements (e.g., \code{c("old" = "new")}).
Column renaming is applied using \code{rename_col()}.}

\item{merge_data}{Logical; if \code{TRUE}, data is merged across multiple experiments for each pattern.
If structures differ, unmerged data is returned separately.}

\item{pattern_mix}{Logical; if \code{TRUE}, allows for pattern matching by dimension names in any order.
Useful when patterns have different orders but identical dimensions.}
}
\value{
\itemize{
\item If \code{merge_data = TRUE}: A list of merged data frames, one per pattern.
\item If \code{merge_data = FALSE}: A list of data frames grouped by experiment and pattern.
}
}
\description{
This function extracts and structures data from one or more SL4 or HAR objects based on specified
dimension patterns. It can process multiple patterns, merge data across experiments, rename columns,
and optionally drop subtotal rows. The function works seamlessly for both SL4 and HAR datasets.
}
\details{
The function supports flexible extraction of data based on dimension patterns. Patterns are matched
case-insensitively, and data is reshaped into a tidy format with explicit dimension names. The
function handles scenarios where multiple patterns are specified and where data from different
experiments need to be merged.

Key features:
\itemize{
\item Extract data for one or multiple dimension patterns.
\item Optionally drop subtotal rows using \code{drop_subtotals}.
\item Rename columns using \code{rename_cols}.
\item Merge data across multiple experiments with \code{merge_data}.
\item Support pattern matching with different orders using \code{pattern_mix}.
}
}
\examples{
# Load SL4 or HAR Data
sl4_data1 <- read_sl4x("path/to/sl4file1.sl4")
sl4_data2 <- read_sl4x("path/to/sl4file2.sl4")

# Extract data for a single pattern from one dataset
extract_by_dims("comm*reg", sl4_data1)

# Extract multiple patterns from a single dataset
extract_by_dims(c("comm*reg", "reg*year"), sl4_data1)

# Extract data for a pattern across multiple datasets
extract_by_dims("comm*reg", sl4_data1, sl4_data2, experiment_names = c("baseline", "policy"))

# Drop subtotal rows and rename columns
extract_by_dims("comm*reg", sl4_data1, drop_subtotals = TRUE, 
                rename_cols = c(REG = "Region", COMM = "Commodity"))

# Merge data for multiple patterns across datasets
extract_by_dims(c("comm*reg", "reg*year"), sl4_data1, sl4_data2, 
                experiment_names = c("baseline", "policy"), merge_data = TRUE)

# Use pattern_mix for flexible pattern matching
extract_by_dims("reg*comm", sl4_data1, pattern_mix = TRUE)

# Extract all patterns from multiple datasets
extract_by_dims(NULL, sl4_data1, sl4_data2, experiment_names = c("baseline", "policy"))

}
