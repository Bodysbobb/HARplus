% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_data.R
\name{get_data}
\alias{get_data}
\title{Extract and Structure Data from SL4 or HAR Objects}
\usage{
get_data(
  var_names = "ALL",
  ...,
  experiment_names = NULL,
  drop_subtotals = FALSE,
  rename_cols = NULL,
  merge_data = FALSE
)
}
\arguments{
\item{var_names}{A character vector of variable names to extract. Use \code{"ALL"} or \code{NULL}
to extract all available variables.}

\item{...}{One or more SL4 or HAR data objects.}

\item{experiment_names}{Optional character vector providing names for each input data object.
If \code{NULL}, names are inferred from the function call.}

\item{drop_subtotals}{Logical; if \code{TRUE}, subtotal rows (with \code{Subtotal == "TOTAL"}) are removed.}

\item{rename_cols}{A named vector specifying column name replacements (e.g., \code{c("old" = "new")}).
Applied using \code{rename_col()}.}

\item{merge_data}{Logical; if \code{TRUE}, attempts to merge data from multiple input objects
for each variable. If structures differ, unmerged datasets are returned separately.}
}
\value{
\itemize{
\item If \code{merge_data = TRUE}: A list with two components:
\itemize{
\item \verb{$merged}: A list of merged data frames, one per variable.
\item \verb{$unmerged}: A nested list of unmerged data frames, grouped by experiment name.
}
\item If \code{merge_data = FALSE}: A named list of variable-specific lists, where each experiment
has its extracted data.
}
}
\description{
Extracts structured data for one or more variables from one or more
SL4 or HAR data objects, transforming array-like data into a tidy format.
Supports merging datasets, renaming columns, and filtering subtotal rows.
}
\details{
The function processes variables by checking their structure, ensuring they are
array-like, and reshaping them into a tidy data format with explicit dimension names.
\itemize{
\item If \code{merge_data = TRUE}, variables are checked for consistency across datasets before merging.
\item If \code{drop_subtotals = TRUE}, rows with \code{Subtotal == "TOTAL"} are excluded.
\item If \code{rename_cols} is provided, column names are modified accordingly.
}

The function is designed to work seamlessly with both \strong{SL4} and \strong{HAR} datasets,
ensuring compatibility across different data formats used in economic modeling.
}
\examples{
# Load SL4 or HAR Data
sl4_data1 <- read_sl4x("path/to/sl4file1.sl4")
sl4_data2 <- read_sl4x("path/to/sl4file2.sl4")

# Extract a single variable from a single dataset
get_data("qo", sl4_data1)

# Extract multiple variables from a single dataset
get_data(c("qo", "qgdp"), sl4_data1)

# Drop subtotals
get_data("qo", sl4_data1, drop_subtotals = TRUE)

# Rename columns
get_data("qo", sl4_data1, rename_cols = c(REG = "Region", COMM = "Commodity"))

# Extract one variable from multiple datasets
get_data("qo", sl4_data1, sl4_data2, experiment_names = c("baseline", "policy"))

# Extract multiple variables from multiple datasets
get_data(c("qo", "qgdp"), sl4_data1, sl4_data2, experiment_names = c("baseline", "policy"))

# Extract all variables
get_data("ALL", sl4_data1)
get_data(NULL, sl4_data1) # Equivalent to "ALL"

# Extract all variables from multiple datasets
get_data(NULL, sl4_data1, sl4_data2, experiment_names = c("baseline", "policy"))

# Merge data from multiple datasets
get_data(c("qo", "qgdp"), sl4_data1, sl4_data2, merge_data = TRUE)

}
